<div class="container-fluid py-4">
  <!-- Main Header with decorative lines -->
  <div class="text-center my-5">
    <h1 class="text-dark mb-3 position-relative">
      <span class="d-inline-block position-relative">
        <span class="d-inline-block mx-2" style="width: 30px;"></span>
        Emisije CO₂ v posamezni regiji v Sloveniji 
        <span class="d-inline-block mx-2" style="width: 30px;"></span>
      </span>
    </h1>
  </div>

 <!-- Introduction Section -->
<div class="mt-3 mb-4 px-6 text-start">
  <p class="text-dark fs-7 mb-3">
    Emisije CO₂ se po regijah v Sloveniji močno razlikujejo, kar odraža različne industrijske profile, gostoto prebivalstva in prometne vzorce. Nekatere regije z večjo industrijsko dejavnostjo ali gostejšo prometno infrastrukturo beležijo višje emisije na prebivalca, medtem ko so v bolj ruralnih območjih emisije običajno nižje.
  </p>
  <p class="text-dark fs-7 mb-3">
    Razumevanje regionalnih razlik je ključno za ciljno usmerjene okoljske politike in učinkovite ukrepe zmanjševanja emisij. Lokalni podatki omogočajo občinam in regijam, da prilagodijo strategije ter spodbujajo trajnostni razvoj, ki ustreza specifičnim potrebam in izzivom.
  </p>
  <p class="text-dark fs-7 mb-3">
    Na spodnjem zemljevidu lahko premaknete miškin kazalec nad posamezne regije, da si ogledate podrobne informacije o emisijah CO₂, prebivalstvu in trendih skozi čas. Tako boste dobili bolj jasno sliko, katera območja so najbolj obremenjena in kje je največ prostora za izboljšave.
  </p>
</div>
<p class="text-dark fs-6">
  ℹ️ Premaknite miškin kazalec nad regijo, da si ogledate podrobnosti o emisijah in številu prebivalcev.
</p>


  <!-- Key Metrics by Region -->
  <div class="row mb-4 justify-content-between text-start">
    <!-- Ljubljana -->
    <div class="col-12 col-md-6 col-lg custom-col mb-3">
      <div class="card border-0 shadow-sm bg-light-primary transition-hover">
        <div class="card-body p-3 d-flex align-items-center">
          <div class="me-2">
            <span class="metric-icon-circle bg-primary text-white rounded-circle">
              <i class="fas fa-city fa-sm"></i>
            </span>
          </div>
          <div>
            <p class="text-sm text-uppercase text-muted mb-1">Ljubljana – Povprečne emisije</p>
            <h5 class="font-weight-bolder mb-1" id="avgEmissions-ljubljana">2.5 MtCO₂</h5>
            <p class="fs-7 mb-0">2000–2022</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Maribor -->
    <div class="col-12 col-md-6 col-lg custom-col mb-3">
      <div class="card border-0 shadow-sm bg-light-primary transition-hover">
        <div class="card-body p-3 d-flex align-items-center">
          <div class="me-2">
            <span class="metric-icon-circle bg-primary text-white rounded-circle">
              <i class="fas fa-industry fa-sm"></i>
            </span>
          </div>
          <div>
            <p class="text-sm text-uppercase text-muted mb-1">Maribor – Mediana emisij</p>
            <h5 class="font-weight-bolder mb-1" id="medianEmissions-maribor">1.8 MtCO₂</h5>
            <p class="fs-7 mb-0">2000–2022</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Celje -->
    <div class="col-12 col-md-6 col-lg custom-col mb-3">
      <div class="card border-0 shadow-sm bg-light-primary transition-hover">
        <div class="card-body p-3 d-flex align-items-center">
          <div class="me-2">
            <span class="metric-icon-circle bg-primary text-white rounded-circle">
              <i class="fas fa-chart-line fa-sm"></i>
            </span>
          </div>
          <div>
            <p class="text-sm text-uppercase text-muted mb-1">Celje – Sprememba emisij</p>
            <h5 class="font-weight-bolder mb-1" id="changeEmissions-celje">+12%</h5>
            <p class="fs-7 mb-0">2000 vs. 2022</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Koper -->
    <div class="col-12 col-md-6 col-lg custom-col mb-3">
      <div class="card border-0 shadow-sm bg-light-primary transition-hover">
        <div class="card-body p-3 d-flex align-items-center">
          <div class="me-2">
            <span class="metric-icon-circle bg-primary text-white rounded-circle">
              <i class="fas fa-water fa-sm"></i>
            </span>
          </div>
          <div>
            <p class="text-sm text-uppercase text-muted mb-1">Koper – Kumulativne emisije</p>
            <h5 class="font-weight-bolder mb-1" id="cumulativeEmissions-koper">35.6 MtCO₂</h5>
            <p class="fs-7 mb-0">2000–2022</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Legend Above Map -->
<div id="legendContainer">
  <strong class="text-white mb-2 d-block">Legenda (CO₂ emisije):</strong>
  <div id="legend">
  <span style="background-color: #084594; width: 20px; height: 20px; display: inline-block;"></span> Zelo visoke &nbsp;
  <span style="background-color: #2171b5; width: 20px; height: 20px; display: inline-block;"></span> Visoke &nbsp;
  <span style="background-color: #4292c6; width: 20px; height: 20px; display: inline-block;"></span> Srednje &nbsp;
  <span style="background-color: #9ecae1; width: 20px; height: 20px; display: inline-block;"></span> Nizke &nbsp;
  <span style="background-color: #deebf7; width: 20px; height: 20px; display: inline-block; border: 1px solid #ccc;"></span> Zelo nizke
</div>

</div>

  <!-- Map Container -->
  <div id="sloveniaContainer"></div>
</div>


    <!-- Navigation Cards -->
    <div class="row mt-5">
      <div class="col-md-3 mb-4">
        <div class="card h-100 border-0 shadow-sm hover-effect">
          <div class="card-body text-center">
            <div class="icon-circle bg-primary text-white mb-3 mx-auto">
              <i class="fas fa-chart-line fa-lg"></i>
            </div>
            <h5 class="card-title">Skupni pregled</h5>
            <p class="card-text text-muted">Celotni pregled emisij CO₂</p>
            <a href="/slovenia?tab=overview.html" class="btn btn-sm btn-outline-primary mt-2">Preberi več</a>
          </div>
        </div>
      </div>

      <div class="col-md-3 mb-4">
      <div class="card h-100 border-0 shadow-sm hover-effect">
        <div class="card-body text-center">
          <div class="icon-circle bg-success text-white mb-3 mx-auto">
            <i class="fas fa-user fa-lg"></i>
          </div>
          <h5 class="card-title">Na osebo 👤</h5>
          <p class="card-text text-muted">Emisije CO₂ glede na prebivalca</p>
          <a href="/slovenia?tab=capita.html" class="btn btn-sm btn-outline-primary mt-2">Preberi več</a>
        </div>
      </div>
    </div>
      
      <div class="col-md-3 mb-4">
        <div class="card h-100 border-0 shadow-sm hover-effect">
          <div class="card-body text-center">
            <div class="icon-circle bg-success text-white mb-3 mx-auto">
              <i class="fas fa-gas-pump fa-lg"></i>
            </div>
            <h5 class="card-title">Po vrsti goriva ⛽</h5>
            <p class="card-text text-muted">Emisije po virih energije</p>
            <a href="/slovenia?tab=fuel.html" class="btn btn-sm btn-outline-primary mt-2">Preberi več</a>
          </div>
        </div>
      </div>
      
      <div class="col-md-3 mb-4">
        <div class="card h-100 border-0 shadow-sm hover-effect">
          <div class="card-body text-center">
            <div class="icon-circle bg-warning text-white mb-3 mx-auto">
              <i class="fas fa-industry fa-lg"></i>
            </div>
            <h5 class="card-title">Po sektorju 🏭</h5>
            <p class="card-text text-muted">Emisije po gospodarskih sektorjih</p>
            <a href="/slovenia?tab=sector.html" class="btn btn-sm btn-outline-primary mt-2">Preberi več</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- JavaScript map renderer -->
<script src="/js/sloveniamap.js"></script>

<!-- CSS Fixes -->
<style>
  #sloveniaContainer {
    width: 100%;
    max-width: 1000px;
    margin: 0 auto;
    aspect-ratio: 4 / 3;
    height: auto;
    position: relative;
  }

  #sloveniaContainer svg {
    width: 100%;
    height: auto;
    display: block;
    object-fit: contain;
  }

#legendContainer {
  margin-top: 10px;
  padding: 10px;
  background: rgba(142, 135, 135, 0.75);
  border-radius: 5px;
  position: sticky;
  bottom: 0;
  z-index: 10;
  max-width: 1000px;
  max-height: 80px;
  margin-left: auto;
  margin-right: auto;
}


  #legend {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  #legend span {
  border-radius: 3px;
  border: 1px solid rgba(0,0,0,0.1);
}


  /* Optional: Style for tooltips if you use them */
  .tooltip {
    position: absolute;
    background-color: rgba(50, 50, 50, 0.9);
    color: #fff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 0.9rem;
    z-index: 20;
    pointer-events: none;
    white-space: nowrap;
  }


#legend {
  min-width: 200px;
  height: 70px;
  color: white;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}




#legend svg {
  display: block;
  height: 50px;
  overflow: visible;

}

/* Decorative lines for headers only */
h1.position-relative > span.position-relative,
h3.position-relative > span.position-relative {
  position: relative;
  display: inline-block;
}

h1.position-relative > span.position-relative::before,
h1.position-relative > span.position-relative::after,
h3.position-relative > span.position-relative::before,
h3.position-relative > span.position-relative::after {
  content: "";
  position: absolute;
  top: 50%;
  width: 150px;
  height: 2px;
  background-color: #a4c0de;
}

h1.position-relative > span.position-relative::before,
h3.position-relative > span.position-relative::before {
  right: 100%;
  margin-right: 15px;
}

h1.position-relative > span.position-relative::after,
h3.position-relative > span.position-relative::after {
  left: 100%;
  margin-left: 15px;
}

/* Responsive adjustments for headers */
@media (max-width: 768px) {
  h1.position-relative > span.position-relative::before,
  h1.position-relative > span.position-relative::after,
  h3.position-relative > span.position-relative::before,
  h3.position-relative > span.position-relative::after {
    width: 20px;
  }
  
  h1.position-relative > span.position-relative::before,
  h3.position-relative > span.position-relative::before {
    margin-right: 10px;
  }
  
  h1.position-relative > span.position-relative::after,
  h3.position-relative > span.position-relative::after {
    margin-left: 10px;
  }
}

/* Style for navigation cards */
.icon-circle {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
}

.hover-effect {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.hover-effect:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
}

/* Chart container styles */
.chart-container {
  max-height: 350px; /* Fixed height for all chart containers */
  overflow: hidden; /* Prevent content overflow */
}

.chart-wrapper {
  position: relative;
  height: 250px; /* Fixed height for canvas and buttons */
  width: 100%;
}

.chart-wrapper canvas {
  max-height: 200px !important; /* Canvas height to leave space for buttons */
  width: 100%;
}

.chart-buttons {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 0 10px;
}

/* Ensure consistent card body padding */
.card-body {
  padding: 15px !important;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .position-relative::before,
  .position-relative::after {
    width: 20px;
  }
  
  .position-relative::before {
    margin-right: 10px;
  }
  
  .position-relative::after {
    margin-left: 10px;
  }

  .chart-container {
    max-height: 300px; /* Slightly smaller for mobile */
  }

  .chart-wrapper {
    height: 220px; /* Adjusted for mobile */
  }

  .chart-wrapper canvas {
    max-height: 180px !important; /* Adjusted canvas height */
  }

  .chart-buttons {
    padding: 0 5px;
  }

  .chart-buttons .btn {
    font-size: 0.8rem; /* Smaller buttons on mobile */
    padding: 5px 10px;
  }
}

</style>